域名系统（英文：DomainNameSystem，缩写：DNS）是互联网的一项服务。它作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。DNS使用TCP和UDP端口53。当前，对于每一级域名长度的限制是63个字符，域名总长度则不能超过253个字符。

更具体地说，DNS是一种全球服务，它是人们使用Internet的基础。 DNS使用分层结构，并且分层结构中的每个不同级别都用点（.）分隔。 例如域名www.amazon .com和aws.amazon.com。 在这两个示例中，com是顶级域（TLD），amazon是第二级域（SLD）。 SLD下方可以有任意多个较低级别（例如，www和aws）。

计算机使用DNS层次结构将人类可读的名称（例如，www.amazon.com）转换为计算机用来相互连接的IP地址（例如192.0.2.1）。 每次使用域名时，DNS服务都必须将名称转换为相应的IP地址。

Route 53是权威的DNS系统。 它提供了一种更新机制，开发人员可以使用该机制来管理其公共DNS名称。 然后，它应答DNS查询，将域名转换为IP地址，以便计算机之间可以相互通信。



# Domain Name System \(DNS\) Concepts

## Top-Level Domains \(TLDs\)

顶级域名（TLD）是该域中最通用的部分。 TLD是最右边的部分（由点分隔）。 常见的TLD是.com，.net，.org，.gov，.edu和.io。

顶级域名（TLD）位于层次结构的顶部。 互联网名称与数字地址分配机构（ICANN）授予某些方对TLD的管理控制权。 然后，这些各方通常可以通过域名注册机构在TLD下分配域名。 这些域已在ICANN的服务网络信息中心（InterNIC）中注册，该服务在整个Internet上强制域名的唯一性。 每个域名都会在一个名为WhoIS的中央数据库中注册。

## Hosts

在域内，管理员可以定义单个主机来指代可通过域访问的单独的计算机或服务。 例如，通过基本域名（example.com）和host定义www（如www.example.com）访问其Web服务器。 您可以在常规域下定义其他主机，例如api.example.com或ftp.example.com。



## 名称服务器

名称服务器是用于将域名转换为IP地址的计算机。 它们在DNS中完成大部分工作。 因为用一台服务器做域转换的话，其转换总数太多，所以每台服务器都可能将请求重定向到其他解析服务器，或将其子域子集的转换职责委派给它们。 名称服务器可以是权威的，也可能指向其他服务器或提供其他名称服务器数据的缓存副本。



## 顶级域名（TLD）名称注册商

由于给定域中的域名必须唯一，因此给了域名注册商进入的机会。域名注册商是管理Internet域名组织或商业机构。 域名注册商必须得到通用TLD（gTLD）注册机构和国家/地区代码TLD（ccTLD）注册机构的认可。 根据指定域名注册机构的指导进行管理。



# 域名解析步骤

在浏览器中输入域名时，计算机首先检查本地host文件以查看域名是否存储在本地。 如果不是，计算机将检查本地DNS缓存。 如果仍然没有该域名的记录，计算机将与DNS服务器联系以解析该域名。

在编写本书时，有13台根服务器在运行。 根服务器处理有关TLD信息的请求。 当请求在下级名称服务器无法解析时，将查询该域的根服务器。

为了处理每天发生的海量解析，这些根服务器被复制多个镜像。 当向某个根服务器发出请求时，该请求将被路由到该根服务器的最近镜像。 

根服务器实际上不会知道域的托管位置，但它有能力将请求重定向到处理专门请求的TLD的名称服务器。



## TLD服务器

## 根服务器返回负责处理请求的TLD服务器的IP地址后，请求发起方随后将新请求发送到该地址。

例如，如果向根服务器发出了对www.wikipedia.org的请求，它将检查其区域文件中是否有与该域名匹配的列表，这实际上是找不到的，它将查找.org TLD的记录，并向请求实体提供负责解析.org地址的名称服务器地址。

请求实体将向.org域名称服务器发送请求，以查看其是否可以找到www.wikipedia.org。

再次，当名称服务器在其区域文件中搜索www.wikipedia.org列表时，当然，还是找不到。 但是，它将找到负责解析Wikipedia.org的名称服务器的IP地址。 这越来越接近正确的IP地址。



## DLN服务器

## 继续上一节的例子，请求发起者已经知道能够解析www.wikipedia.org的域名服务器地址，它将请求发送到该服务器，再次询问解析。

服务器检查本地zone文件，并找到与Wikipedia.org相关的文件。 在此文件有一条记录，包含.www主机的IP地址。 名称服务器将最终地址返回给请求者。



