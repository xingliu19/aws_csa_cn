Route 53是一种高度可用且可扩展的云DNS Web服务，旨在为开发人员和企业提供一种极其可靠且经济高效的方式来将最终用户路由到Internet。

Route 53有三个主要功能：

域名注册-Route 53可让您注册域名，例如example.com。

DNS服务-Route 53转换友好的域名，例如 www.example.com转换为IP地址，例如192.0.2.1。 Route 53使用全球权威DNS服务器网络响应DNS查询，从而减少了延迟。 为了符合DNS标准，通过用户数据报协议（UDP）发送的响应的大小限制为512字节。 超过512字节的响应将被截断，解析器必须通过TCP重新发出请求。

运行状况检查-Amazon Route 53通过Internet向您的应用程序发送自动请求，以验证其是否可以访问，可用和正常运行。



# 域名注册

创建网站首先需要注册域名。 如果您已经在其他注册商处注册了域名，可以选择将域名注册转移到Amazon Route53。不强制将Route 53用作DNS服务或检查资源配置运行状况。

Route 53支持为各种通用TLD（例如.com和.org）和地理TLD（例如.be和.us）进行域注册。 有关受支持的TLD的完整列表，请参阅Route 53开发人员指南 https://docs.aws.amazon.com/Route53/latest/DeveloperGuide。



# DNS服务

如前所述，Route 53是一项权威的DNS服务。 当有人在浏览器中输入您的域名或向您发送电子邮件时，DNS请求将转发到全球权威DNS服务器网络中最近的Route 53 DNS服务器。 Route 53用您指定的IP地址进行响应。

如果您在Route 53中注册新域名，Route 53将自动配置该域的DNS服务，并且将为您的域创建一个托管区域。 您将资源记录集添加到托管区域，该区域定义了您希望Route 53如何响应您的域的DNS查询策略（例如，使用Web服务器的IP地址，最近位置的IP地址， 或ELB的IP地址）。

如果您向另一个域注册商注册了域，则该注册商可能正在为您的域提供DNS服务。 您可以将DNS服务转移到Route 53。

如果您使用的是CloudFront，Simple Storage Service（S3）或Elastic Load Balancing，则可以配置Route 53将Internet流量重定向到这些资源。



托管区域

托管区域是由Route 53托管的资源记录集的集合。与传统的DNS区域文件一样，托管区域表示单个域名接受管理的资源记录集。 每个托管区域都有自己的元数据和配置信息。

托管区域有两种类型：私有区域和公共区域。 私有托管区域是一个容器，其中包含有关如何在一个或多个VPC为其域名及其子域名路由网络请求的信息。 公共托管区域是一个容器，其中包含有关您要如何在互联网上的域名（例如，example.com）及其子域名（例如，apex.example.com和acme.example.com）的路由网络请求的信息。 



Route 53支持以下DNS资源记录类型。 当您使用API访问Route 53时，您将看到有关如何格式化每种记录类型值的示例。

• A

• AAAA

• CNAME

• MX

• NS

• PTR

• SOA

• SPF

• SRV

• TXT

• Routing Policies

创建资源记录集时，您将选择一个路由策略，该策略确定Route 53如何响应查询。 路由策略选项有：简单，加权，基于延迟，故障转移和地理位置。 指定选项后，Route 53会评估资源的相对权重，客户端对资源的网络延迟或客户端的地理位置等因素确定如何返回响应信息。



简单

这是创建新资源时默认的路由策略。 当您拥有一个单一的资源，为您的域名执行给定功能时（例如，一个为example.com网站提供内容的Web服务器），请使用简单的路由策略。 在这种情况下，Route 53仅基于资源记录集中的值（例如，A记录中的IP地址）来响应DNS查询。

加权DNS

使用加权DNS，您可以将多个资源如EC2实例或ELB负载均衡器与单个DNS名称关联。

当您有多个执行相同功能的资源（例如，服务于同一网站的Web服务器）并且希望Route 53将流量按指定比例路由到这些资源时，请使用加权路由策略。 

要创建一组加权资源记录集，您需要创建两个或多个具有相同DNS名称和类型的资源记录集。 然后，您为每个资源记录集分配一个唯一的标识符和一个相对权重。

在处理DNS查询时，Route 53将搜索具有相同名称和DNS记录类型（例如A记录）的资源记录集。 然后从该组中选择一条记录。 选择资源记录集的概率由以下公式决定：

概率 = 权重 / 权重之和

基于延迟

基于延迟的路由策略使您可以根据最终用户的最低网络延迟来路由流量（例如，使用将为他们提供最快响应时间的AWS区域）。

当您具有在多个AWS可用域中执行相同功能的资源并且希望Route 53使用提供最佳延迟的资源来响应DNS查询时，请使用延迟路由策略。例如，假设你在美国西部（俄勒冈）地区和亚太地区（新加坡）地区拥有Elastic Load Balancing负载均衡器，并且您在Route 53中为每个负载均衡器创建了延迟资源记录集。伦敦的用户在浏览器中输入您的域名，然后DNS将请求路由到Amazon Route 53名称服务器。 Amazon Route 53引用了其有关伦敦和新加坡地区之间以及伦敦和伦敦之间的延迟的数据俄勒冈州。如果伦敦和俄勒冈州之间的延迟时间较短，则Amazon Route 53将使用俄勒冈州的负载均衡器的IP地址响应用户的请求。如果伦敦和新加坡地区之间的等待时间较短，则Amazon Route 53将以您在新加坡的负载均衡器的IP地址进行响应。

故障转移

使用故障转移路由策略来配置主动-被动故障转移，其中一种资源在可用时占用所有流量，而另一种资源在第一种资源不可用时占用所有流量。请注意，您无法为私有托管区域创建故障转移资源记录集。例如，您可能希望将主要资源记录设置在美国西部（北加利福尼亚），而将次要灾难恢复（DR）的资源设置在美国东部（弗吉尼亚）。 Route 53将使用运行状况检查来监视您的主要资源终端节点的运行状况。

运行状况检查告诉Route 53如何将请求发送到您要检查其运行状况的终端节点：协议（HTTP，HTTPS或TCP），IP地址和端口，以及用于HTTP / HTTPS运行状况检查，域名和路径。

配置运行状况检查后，Amazon将监视所选DNS终端节点的运行状况。如果运行状况检查失败，则将应用故障转移路由策略，并且DNS将故障转移到灾难恢复站点。

地理位置

通过地理位置路由，您可以根据用户的地理位置（DNS查询源自的位置）选择Amazon Route 53将流量发送到何处。

地理位置的工作原理是将IP地址映射到地理位置。 不过，您应谨慎，因为某些IP地址未映射到地理位置。 即使您创建覆盖所有七个大洲的地理位置资源记录集，Route 53也会从无法识别的位置接收一些DNS查询。

在这种情况下，您可以创建一个默认的资源记录集，以处理来自未映射到任何位置的IP地址的查询以及来自尚未为其创建地理位置资源记录集的位置的查询。 如果您未创建默认资源记录集，则Route 53将针对来自这些位置的查询返回“ no answer”响应。



